```MATLAB

% Initialize an object of the model.
m = OneModel.load('./model/model.mc');

% Display variables and equations of the model.
disp('Variables of the model:');
m.vars
disp('Equations of the model:');
m.eqns

%% 2. Simulation.

% Initialize a SimulationClass object with the model data.
s = SimulationClass(m);

% Simulation time span.
tspan = [0 10];

% Parameters of the model.
p = []; % They are already defined in "model.mc"
% p.d1 = 10;

% Intial conditions of the model.
x0 = [];
x0.x1 = 0.000000;
x0.x2 = 0.000000;
x0.x3 = 0.000000;

% Options for the solver.
opt = odeset('AbsTol', 1e-8, 'RelTol', 1e-8);

% Simulate the model.
[out] = s.simulate(tspan,x0,p,opt);

% Result of the simulation.
disp('Result of the simulation:');
out

% Generate an ode function of the model.
s.generateOdeFunction();
% Generate the driver script for the ode function.
s.generateDriverOdeFunction();
```

```
Found a previous compilated model at: ./build/model.m
Model is up-to-date.
Using preexisting compilated model.
Model is loading...
Model is loaded.
Variables of the model:
 
ans =
 
 x1
 x2
 x3
ref
 
Equations of the model:
 
ans =
 
   der_x1 == k1 - d1*x1 - gamma12*x1*x2
der_x2 == k2*x3 - d2*x2 - gamma12*x1*x2
                der_x3 == k3*x1 - d3*x3
                           ref == k3/d3
 
Result of the simulation:

out = 

  struct with fields:

          t: [154x1 double]
         x1: [154x1 double]
         x2: [154x1 double]
         x3: [154x1 double]
        ref: [154x1 double]
         k1: [154x1 double]
         k2: [154x1 double]
         k3: [154x1 double]
         d1: [154x1 double]
         d2: [154x1 double]
         d3: [154x1 double]
    gamma12: [154x1 double]

```

# Autogenerate ode function

```sh
cat modelOdeFun.m
```

```
function [dxdt] =  modelOdeFun(t,x,p)
%% MODELODEFUN Function that evaluates the ODEs of model.mc
% This function was autogenerated with OneModel v0.5.1 95580f4   -   Fernando Nóbel (fersann1@upv.es).
%
% param: t Current time in the simulation.
%      : x Vector with states values.
%      : p Struct with the parameters.
%
% return: dxdt Vector with derivatives values.

% States
% x(1,:) = x1
% x(2,:) = x2
% x(3,:) = x3

% der(x1)
dxdt(1,1) = p.k1-p.d1.*x(1,:)-p.gamma12.*x(1,:).*x(2,:);

% der(x2)
dxdt(2,1) = -p.d2.*x(2,:)+p.k2.*x(3,:)-p.gamma12.*x(1,:).*x(2,:);

% der(x3)
dxdt(3,1) = -p.d3.*x(3,:)+p.k3.*x(1,:);

end
```

```sh
cat modelDriverOdeFun.m
```

```
%% Driver script for simulating the ODE function modelDriverOdeFun
% This script was autogenerated with OneModel v0.5.1 95580f4   -   Fernando Nóbel (fersann1@upv.es).

clear all;
close all;

% Mass matrix for algebraic simulations.
M = [
	1	0	0	
	0	1	0	
	0	0	1	
];

% Options for the solver.
opt = odeset('AbsTol',1e-8,'RelTol',1e-8);
opt = odeset(opt,'Mass',M);

% Simulation time span.
tspan = [0 10];

% Default initial condition value.
x0 = [
	 0.000000e+00 % x1
	 0.000000e+00 % x2
	 0.000000e+00 % x3
];

% Default parameters value.
p.k1 = 1.000000e+00;
p.k2 = 1.000000e+00;
p.k3 = 1.000000e+00;
p.d1 = 1.000000e+00;
p.d2 = 1.000000e+00;
p.d3 = 1.000000e+00;
p.gamma12 = 1.000000e+00;

[t,x] = ode15s(@(t,x) modelOdeFun(t,x,p), tspan, x0, opt);

plot(t,x);
legend('x1','x2','x3');
grid on;

```

# Import a model

```MATLAB
m = OneModel.load('./model/importModel.mc')
```

```
Found a previous compilated model at: ./build/importModel.m
Model is up-to-date.
Using preexisting compilated model.
Model is loading...
Model is loaded.

m = 

  importModel with properties:

              isReduced: 0
              namespace: ''
       dependenciesPath: {}
                   vars: [4x1 sym]
        varsIsAlgebraic: [4x1 logical]
               varsName: {4x1 cell}
              varsStart: [0 0 0 0]
       varsIsNoNegative: [0 0 0 0]
    varsIndexNoNegative: []
               varsPlot: [1 1 1 1]
                varsNum: 4
                   eqns: [4x1 sym]
               eqnsName: {'eq_0'  'eq_1'  'eq_2'  'eq_3'}
               eqnsLeft: [1x4 sym]
              eqnsRight: [1x4 sym]
                   ders: [1x4 sym]
                 isSubs: [0 0 0 0]
                 params: [1x7 sym]
             paramsName: {7x1 cell}
            paramsValue: [NaN NaN NaN NaN NaN NaN NaN]
            symbolsName: {'x1'  'x2'  'x3'  'k1'  'k2'  'k3'  'd1'  'd2'  'd3'  'gamma12'  'ref'}
          symbolsIsPlot: [1 1 1 0 0 0 0 0 0 0 1]
         modelPartsName: {'x1'  'x2'  'x3'  'k1'  'k2'  'k3'  'd1'  'd2'  'd3'  'gamma12'  'eq_0'  'eq_1'  'eq_2'  'ref'  'eq_3'}
             modelParts: {1x15 cell}
                symbols: {1x11 cell}
              variables: [1x4 VariableClass]
             parameters: [1x7 ParameterClass]
              equations: [1x4 EquationClass]
             simOptions: [1x1 SimulationOptionsClass]

```
